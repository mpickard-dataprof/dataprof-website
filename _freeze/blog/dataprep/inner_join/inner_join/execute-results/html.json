{
  "hash": "70344b0334fd266d469543965f9f61f0",
  "result": {
    "markdown": "---\ntitle: \"Inner Join\"\nformat: html\n---\n\n\n\n\n## What is an inner join?\n\nAn inner join keeps only rows from two tables that have matches. This Venn diagram illustrates which rows are included in an inner join.\n\n![](inner_join_venn.svg){height=250 fig-align=\"center\"}\n\n## How does an inner join work?\n\nAn inner join visits every row in the left table and then checks if there is a matching row in the right table. If there is, it combines the fields from the matching left and right row. If there is not a match, it drops the row. Thus only the \"intersection\" of rows from both tables is kept in the result.\n\n## How many records end up in the result of an inner join?\n\n$L =$ # of records in the left table\n\n$R =$ # of records in the right table\n\nThen the number of rows in the resulting inner join is $min(L,R)$\n\n::: {layout=\"\\[\\[32,68\\], \\[100\\]\\]\"}\n\n![Left Table](inner_join_left_table.svg)\n\n![Right Table](inner_join_right_table.svg)\n\n![Inner Joined Result](inner_join_results.svg)\n\n:::\n\nNotice how the last row in the left table (`id=5`, `name=\"Rowlf the Dog`) and the last row in the right table (`id=-8`, `role=\"frenzied monster drummer\"`, `wage_per_hour=45.75`) were dropped.\n\n[The Data School](https://dataschool.com/how-to-teach-people-sql/inner-join-animated/) provides [a nice animation](https://dataschool.com/assets/images/how-to-teach-people-sql/innerJoin/innerJoin_3.gif) of the row by row operations for an inner join.\n\n## Implementing an inner join in different tools\n\nHere is how you perform an inner join in [R](#r), [Python](#python), [Power BI](#power-bi), and [Excel](#excel).\n\n### R\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\n\nemployees %>% \n  inner_join(positions, by = \"muppet_id\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 4 Ã— 4\n  muppet_id names           role             wage_per_hour\n      <dbl> <chr>           <chr>                    <dbl>\n1         1 Kermit the Frog pragmatic leader          75  \n2         2 Miss Piggy      diva pig                  85  \n3         3 Fozzie the Bear stand-up comic            25.2\n4         4 Gonzo           stunt performer           54.5\n```\n:::\n:::\n\n\n### Python\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n```{.python .cell-code}\nimport pandas as pd\n\npd.merge(employees, positions, how='inner')\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   muppet_id            names              role  wage_per_hour\n0        1.0  Kermit the Frog  pragmatic leader          75.00\n1        2.0       Miss Piggy          diva pig          85.00\n2        3.0  Fozzie the Bear    stand-up comic          25.25\n3        4.0            Gonzo   stunt performer          54.50\n```\n:::\n:::\n\n\n### Power BI\n\nIn Power BI, we invoke Power Query through the Home \\>\\> Transform data menu item. {{< video https://youtu.be/f2i8VpW-wR0 >}}\n\n### Excel\n\nIn native Excel, there is not a true inner join. The best we can do is mimic an inner join in two steps. First, find the set of intersecting values from the primary keys (ids) from both tables. We can use the `MATCH()` function to do this. Second, use that set of intersecting keys to merge in the columns together by using `VLOOKUP()` repeatedly.\n\n\n{{< video https://youtu.be/SHXhUIzillE >}}\n\n\n\n:::{.callout-note} You can invoke Power Query in Excel (through the Data \\>\\> Get Data menu item) to perform a true inner join. :::\n",
    "supporting": [
      "inner_join_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}